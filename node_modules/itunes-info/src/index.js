#!/usr/bin/env node

import winston from 'winston';
import minimist from 'minimist';
import { iTunes } from './itunes';

const params = minimist(process.argv.slice(2));

if (params['_'].length < 1) {
  winston.error('Invalid parameters.');
  winston.error('Please provide an iTunes query as first parameter.');
  process.exit();
}

winston.info('Fetching data for: ' + params['_'].join(' '));

iTunes.fetch(params['_'][0])
      .then((data) => {
        winston.info(JSON.stringify(data, null, 4));
      }).catch(error => winston.error(error));
