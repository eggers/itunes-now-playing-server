#!/usr/bin/env node
'use strict';

var _winston = require('winston');

var _winston2 = _interopRequireDefault(_winston);

var _minimist = require('minimist');

var _minimist2 = _interopRequireDefault(_minimist);

var _itunes = require('./itunes');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var params = (0, _minimist2.default)(process.argv.slice(2));

if (params['_'].length < 1) {
  _winston2.default.error('Invalid parameters.');
  _winston2.default.error('Please provide an iTunes query as first parameter.');
  process.exit();
}

_winston2.default.info('Fetching data for: ' + params['_'].join(' '));

_itunes.iTunes.fetch(params['_'][0]).then(function (data) {
  _winston2.default.info(JSON.stringify(data, null, 4));
}).catch(function (error) {
  return _winston2.default.error(error);
});